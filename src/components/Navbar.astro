---
import Logo from "./Logo.astro";

const links = [
  { label: "How it works", href: "/#how" },
  { label: "For Labs", href: "/#labs" },
  { label: "For Model Partners", href: "/#partners" },
  { label: "Trust", href: "/#trust" },
  { label: "FAQ", href: "/faq" },
  { label: "Contact", href: "/#contact" },
];
---

<header class="sticky top-0 z-50 border-b border-border bg-background/80 backdrop-blur-md">
  <nav class="mx-auto flex max-w-6xl items-center justify-between px-6 py-4">
    <Logo />

    {/* Desktop links */}
    <div class="hidden items-center gap-8 md:flex">
      {links.map((l) => (
        <a href={l.href} class="text-sm text-neutral-400 transition-colors hover:text-white">
          {l.label}
        </a>
      ))}
      <a
        href="#contact"
        class="rounded-md bg-accent px-4 py-2 text-sm font-medium text-black transition-opacity hover:opacity-90"
      >
        Request early access
      </a>
    </div>

    {/* Mobile hamburger */}
    <button
      id="menu-toggle"
      class="flex flex-col gap-1.5 md:hidden"
      aria-label="Toggle menu"
    >
      <span id="bar-1" class="h-0.5 w-6 bg-white transition-transform"></span>
      <span id="bar-2" class="h-0.5 w-6 bg-white transition-opacity"></span>
      <span id="bar-3" class="h-0.5 w-6 bg-white transition-transform"></span>
    </button>
  </nav>

  {/* Mobile menu */}
  <div id="mobile-menu" class="hidden border-t border-border px-6 pb-6 md:hidden">
    {links.map((l) => (
      <a href={l.href} class="mobile-link block py-3 text-sm text-neutral-400 transition-colors hover:text-white">
        {l.label}
      </a>
    ))}
    <a
      href="#contact"
      class="mobile-link mt-2 inline-block rounded-md bg-accent px-4 py-2 text-sm font-medium text-black"
    >
      Request early access
    </a>
  </div>
</header>

<script>
  const toggle = document.getElementById("menu-toggle");
  const menu = document.getElementById("mobile-menu");
  const bar1 = document.getElementById("bar-1");
  const bar2 = document.getElementById("bar-2");
  const bar3 = document.getElementById("bar-3");
  let open = false;

  toggle?.addEventListener("click", () => {
    open = !open;
    menu?.classList.toggle("hidden", !open);
    bar1?.classList.toggle("translate-y-2", open);
    bar1?.classList.toggle("rotate-45", open);
    bar2?.classList.toggle("opacity-0", open);
    bar3?.classList.toggle("-translate-y-2", open);
    bar3?.classList.toggle("-rotate-45", open);
  });

  document.querySelectorAll(".mobile-link").forEach((link) => {
    link.addEventListener("click", () => {
      open = false;
      menu?.classList.add("hidden");
      bar1?.classList.remove("translate-y-2", "rotate-45");
      bar2?.classList.remove("opacity-0");
      bar3?.classList.remove("-translate-y-2", "-rotate-45");
    });
  });
</script>
